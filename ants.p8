pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- base logic

function _init() 
 -- allow mouse :)
 poke(0x5f2d, 1)

 cur_init()
	ants_init()
end

function _draw()
	cls(4)
	ants_draw()
	cur_draw()
end

function _update60()
 cur_update()
 local click=stat(34)
 --left click
 if(1==click) then
 sfx(0,-1,4)
  ants_add(cur_x,cur_y)
 end
 --right click
 --itll be hard to remove
 --how itis now :/
 --if(2==click) 
 
	ants_move()
end
-->8
-- cursor

function cur_init()
 cur_spr=1
 cur_x=60
 cur_y=60
end

function cur_draw()
	spr(cur_spr,cur_x,cur_y)
end

function cur_update()
 --mouse loc
	cur_x=stat(32)-1
	cur_y=stat(33)-1
end
-->8
-- ants

function ants_init()
	ants={}
end

function ants_add(x,y)
	ants[#ants+1]={x=x,y=y}
end

function ants_loop(func)
	for i=1,#ants do
		func(ants[i])
	end
end

function ants_draw()
	ants_loop(
		function(ant)
			pset(ant.x,ant.y,0)
		end
	)
end

function ants_move()
	ants_loop(ant_move)
end

function ant_move(ant)
	local movement=rnd(100)
	
	if(95<movement) then
		ant.x=ant.x+1
	elseif(90<movement) then
		ant.y=ant.y+1
	elseif(85<movement) then
		ant.x=ant.x-1
	elseif(80<movement) then
		ant.y=ant.y-1
	end
	
	ant.x=loop_screen(ant.x)
	ant.y=loop_screen(ant.y)
end



-->8
-- screen helpers

function loop_screen(pos)
	if(128<pos) return 0
	if(0>pos) return 128

	return pos
end
__gfx__
00000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000161000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700166100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000166610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000166661000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700166110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0002000000000000000000000000240501d05021050230502605000000000002505025050250501d0501d0001d00000000000000a000000000000000000000000000000000000000000000000000000000000000
